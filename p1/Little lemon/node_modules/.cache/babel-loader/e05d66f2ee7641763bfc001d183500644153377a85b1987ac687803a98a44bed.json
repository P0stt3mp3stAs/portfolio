{"ast":null,"code":"var _jsxFileName = \"/Users/lucy/Desktop/Capstone1/Little lemon/src/pages/Booking/BookingPage.jsx\",\n  _s = $RefreshSig$();\nimport { useCallback, useReducer, useEffect } from 'react';\nimport { useLocation } from 'react-router-dom';\nimport { Main, Heading, ProgressBar, Button, Icon } from '../../components';\nimport { faTimes, faArrowLeft } from '@fortawesome/free-solid-svg-icons';\nimport './BookingPage.css';\nimport { Outlet, useNavigate } from 'react-router-dom';\nimport { BookingForm } from './components';\nimport { FormContextProvider } from '../../context';\nimport { submitAPI } from '../../utilities';\nimport { bookingFormReducer, STAGES, loadInitialState } from '../../actions';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const BookingPage = () => {\n  _s();\n  var _location$state2;\n  const location = useLocation();\n  const [state, dispatch] = useReducer(bookingFormReducer, loadInitialState());\n  useEffect(() => {\n    var _location$state;\n    if ((location === null || location === void 0 ? void 0 : (_location$state = location.state) === null || _location$state === void 0 ? void 0 : _location$state.from) === 'navigation') dispatch({\n      type: 'reset'\n    });\n  }, [location === null || location === void 0 ? void 0 : (_location$state2 = location.state) === null || _location$state2 === void 0 ? void 0 : _location$state2.from]);\n  const navigate = useNavigate();\n\n  /*****************************************************************/\n  /** Event Handling */\n  /*****************************************************************/\n  const goNextStage = useCallback(() => {\n    var _STAGES$indexOf;\n    const stageIndex = (_STAGES$indexOf = STAGES === null || STAGES === void 0 ? void 0 : STAGES.indexOf(state.stage)) !== null && _STAGES$indexOf !== void 0 ? _STAGES$indexOf : STAGES.length;\n    if (stageIndex < STAGES.length - 1) {\n      dispatch({\n        type: 'setStage',\n        payload: STAGES[stageIndex + 1]\n      });\n    }\n    return;\n  }, [state.stage]);\n  const goPreviousStage = useCallback(() => {\n    var _STAGES$indexOf2;\n    const stageIndex = (_STAGES$indexOf2 = STAGES === null || STAGES === void 0 ? void 0 : STAGES.indexOf(state.stage)) !== null && _STAGES$indexOf2 !== void 0 ? _STAGES$indexOf2 : 0;\n    if (stageIndex > 0) {\n      dispatch({\n        type: 'setStage',\n        payload: STAGES[stageIndex - 1]\n      });\n    } else {\n      navigate('/');\n    }\n    return;\n  }, [state.stage, navigate]);\n  const submitForm = e => {\n    e.preventDefault();\n    try {\n      // Loop through the state.formErrors object and find if any fields have errors\n      if (Object.values(state.formErrors).find(val => val.length > 0)) {\n        throw new Error('Form could not be submitted - contains errors!');\n      }\n\n      // Submit Form\n      const response = submitAPI({\n        booking_id: state.booking_id,\n        ...state.formData\n      });\n      if (response) {\n        goNextStage();\n        navigate('thank-you');\n      } else throw new Error('Form could not be submitted to the server.');\n    } catch (err) {\n      console.log(err.message);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(Main, {\n    children: [/*#__PURE__*/_jsxDEV(ProgressBar, {\n      value: (STAGES.indexOf(state.stage) + 1) / STAGES.length * 100\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"nav\", {\n      className: \"LL-BookingPageNavigation\",\n      children: [STAGES[STAGES.length - 1] !== state.stage && /*#__PURE__*/_jsxDEV(Button, {\n        ariaLabel: \"Go Back\",\n        unstyled: true,\n        onClick: goPreviousStage,\n        children: /*#__PURE__*/_jsxDEV(Icon, {\n          src: faArrowLeft,\n          size: \"2x\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Heading, {\n        tag: \"h1\",\n        size: \"xl\",\n        align: \"center\",\n        children: state.stage\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 9\n      }, this), STAGES[STAGES.length - 1] !== state.stage && /*#__PURE__*/_jsxDEV(Button, {\n        ariaLabel: \"Exit\",\n        unstyled: true,\n        onClick: () => {},\n        children: /*#__PURE__*/_jsxDEV(Icon, {\n          src: faTimes,\n          size: \"2x\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(FormContextProvider, {\n      value: {\n        state,\n        dispatch\n      },\n      children: [STAGES.indexOf(state.stage) === 0 && /*#__PURE__*/_jsxDEV(\"section\", {\n        className: \"LL-BookingPageContainer\",\n        children: [/*#__PURE__*/_jsxDEV(\"section\", {\n          id: \"LL-BookingPageHero\",\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            src: \"https://ik.imagekit.io/zenius/Coursera/html-css/little-lemon-restaurant_wsHVlbvkh.jpg?ik-sdk-version=javascript-1.4.3&updatedAt=1675153797856&tr=w-1080%2Ch-1350%2Cfo-auto\",\n            alt: \"Little Lemon - Seating\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(BookingForm, {\n          onSubmit: submitForm\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Outlet, {\n        context: {\n          data: {\n            booking_id: state.booking_id,\n            ...state.formData\n          },\n          stage: state.stage\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 68,\n    columnNumber: 5\n  }, this);\n};\n_s(BookingPage, \"CKgfz/+BFu3f74KhFVcOPRtA6J4=\", false, function () {\n  return [useLocation, useNavigate];\n});\n_c = BookingPage;\nvar _c;\n$RefreshReg$(_c, \"BookingPage\");","map":{"version":3,"names":["useCallback","useReducer","useEffect","useLocation","Main","Heading","ProgressBar","Button","Icon","faTimes","faArrowLeft","Outlet","useNavigate","BookingForm","FormContextProvider","submitAPI","bookingFormReducer","STAGES","loadInitialState","jsxDEV","_jsxDEV","BookingPage","_s","_location$state2","location","state","dispatch","_location$state","from","type","navigate","goNextStage","_STAGES$indexOf","stageIndex","indexOf","stage","length","payload","goPreviousStage","_STAGES$indexOf2","submitForm","e","preventDefault","Object","values","formErrors","find","val","Error","response","booking_id","formData","err","console","log","message","children","value","fileName","_jsxFileName","lineNumber","columnNumber","className","ariaLabel","unstyled","onClick","src","size","tag","align","id","alt","onSubmit","context","data","_c","$RefreshReg$"],"sources":["/Users/lucy/Desktop/Capstone1/Little lemon/src/pages/Booking/BookingPage.jsx"],"sourcesContent":["import { useCallback, useReducer, useEffect } from 'react';\nimport { useLocation } from 'react-router-dom';\nimport { Main, Heading, ProgressBar, Button, Icon } from '../../components';\nimport { faTimes, faArrowLeft } from '@fortawesome/free-solid-svg-icons';\nimport './BookingPage.css';\nimport { Outlet, useNavigate } from 'react-router-dom';\nimport { BookingForm } from './components';\nimport { FormContextProvider } from '../../context';\nimport { submitAPI } from '../../utilities';\n\nimport { bookingFormReducer, STAGES, loadInitialState } from '../../actions';\n\nexport const BookingPage = () => {\n  const location = useLocation();\n\n  const [state, dispatch] = useReducer(bookingFormReducer, loadInitialState());\n\n  useEffect(() => {\n    if (location?.state?.from === 'navigation') dispatch({ type: 'reset' });\n  }, [location?.state?.from]);\n\n  const navigate = useNavigate();\n\n  /*****************************************************************/\n  /** Event Handling */\n  /*****************************************************************/\n  const goNextStage = useCallback(() => {\n    const stageIndex = STAGES?.indexOf(state.stage) ?? STAGES.length;\n    if (stageIndex < STAGES.length - 1) {\n      dispatch({ type: 'setStage', payload: STAGES[stageIndex + 1] });\n    }\n    return;\n  }, [state.stage]);\n\n  const goPreviousStage = useCallback(() => {\n    const stageIndex = STAGES?.indexOf(state.stage) ?? 0;\n    if (stageIndex > 0) {\n      dispatch({ type: 'setStage', payload: STAGES[stageIndex - 1] });\n    } else {\n      navigate('/');\n    }\n    return;\n  }, [state.stage, navigate]);\n\n  const submitForm = e => {\n    e.preventDefault();\n    try {\n      // Loop through the state.formErrors object and find if any fields have errors\n      if (Object.values(state.formErrors).find(val => val.length > 0)) {\n        throw new Error('Form could not be submitted - contains errors!');\n      }\n\n      // Submit Form\n      const response = submitAPI({\n        booking_id: state.booking_id,\n        ...state.formData,\n      });\n      if (response) {\n        goNextStage();\n        navigate('thank-you');\n      } else throw new Error('Form could not be submitted to the server.');\n    } catch (err) {\n      console.log(err.message);\n    }\n  };\n\n  return (\n    <Main>\n      <ProgressBar\n        value={((STAGES.indexOf(state.stage) + 1) / STAGES.length) * 100}\n      />\n\n      <nav className=\"LL-BookingPageNavigation\">\n        {STAGES[STAGES.length - 1] !== state.stage && (\n          <Button ariaLabel=\"Go Back\" unstyled onClick={goPreviousStage}>\n            <Icon src={faArrowLeft} size=\"2x\" />\n          </Button>\n        )}\n        <Heading tag=\"h1\" size=\"xl\" align=\"center\">\n          {state.stage}\n        </Heading>\n        {STAGES[STAGES.length - 1] !== state.stage && (\n          <Button ariaLabel=\"Exit\" unstyled onClick={() => {}}>\n            <Icon src={faTimes} size=\"2x\" />\n          </Button>\n        )}\n      </nav>\n\n      <FormContextProvider value={{ state, dispatch }}>\n        {STAGES.indexOf(state.stage) === 0 && (\n          <section className=\"LL-BookingPageContainer\">\n            {/** Enter Content for Larger Screens */}\n            <section id=\"LL-BookingPageHero\">\n              <img\n                src=\"https://ik.imagekit.io/zenius/Coursera/html-css/little-lemon-restaurant_wsHVlbvkh.jpg?ik-sdk-version=javascript-1.4.3&updatedAt=1675153797856&tr=w-1080%2Ch-1350%2Cfo-auto\"\n                alt=\"Little Lemon - Seating\"\n              />\n            </section>\n            <BookingForm onSubmit={submitForm} />\n          </section>\n        )}\n        <Outlet\n          context={{\n            data: { booking_id: state.booking_id, ...state.formData },\n            stage: state.stage,\n          }}\n        />\n      </FormContextProvider>\n    </Main>\n  );\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}